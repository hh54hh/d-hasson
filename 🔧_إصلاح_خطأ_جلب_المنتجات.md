# ๐ง ุฅุตูุงุญ ุฎุทุฃ ุฌูุจ ุงูููุชุฌุงุช - ูุฑูุฒ ุงูุจุฏุฑ

## ๐จ ุงูุฎุทุฃ ุงูุฐู ุชู ุฅุตูุงุญู

### ุงูุฃุฎุทุงุก ุงูุฃุตููุฉ:

```
ูุดู ูู ุฌูุจ ุงูููุชุฌุงุช: [object Object]
ูุดู ูู ุฌูุจ ุงูููุชุฌุงุช: Operation quantitySync_products_1750081457460 timed out (NO_CODE)
```

## ๐ ุชุญููู ุงููุดููุฉ

### ุงูุฃุณุจุงุจ ุงูุฌุฐุฑูุฉ:

1. **ุนุฑุถ ุฎุทุฃ "[object Object]"** - ุนุฏู ุชูุณูู ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ ููุนุฑุถ
2. **ุงูุชูุงุก ูููุฉ ุงูุนูููุงุช (Timeout)** - ูููุฉ ูุตูุฑุฉ ุฌุฏุงู ููุนูููุงุช ุงูุทูููุฉ
3. **ุฑุณุงุฆู ุฎุทุฃ ุบูุฑ ูุงุถุญุฉ** - ูุง ุชูุถุญ ุงููุดููุฉ ุงูุญููููุฉ ูููุณุชุฎุฏู
4. **ุนุฏู ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุดุจูุฉ ุจุดูู ููุงุณุจ** - ูุดู ูู ุงูุชุนุงูู ูุน ุงููุทุงุน ุงูุงุชุตุงู

### ุชุณูุณู ุงููุดููุฉ:

```
ุทูุจ ุฌูุจ ุงูููุชุฌุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช โ
ุงูุชูุงุก ุงููููุฉ ุงูุฒูููุฉ (20-30 ุซุงููุฉ) โ
ุฑูู ุฎุทุฃ Object ุจุฏูุงู ูู ูุต ูุงุถุญ โ
ุนุฑุถ "[object Object]" ูููุณุชุฎุฏู โ
```

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. **ุฅุตูุงุญ ุนุฑุถ ุงูุฃุฎุทุงุก - ููุน "[object Object]"**

#### ูุจู ุงูุฅุตูุงุญ - ุบูุฑ ูุงุถุญ:

```typescript
} catch (error: any) {
  logError("ูุดู ูู ุฌูุจ ุงูููุชุฌุงุช:", error);
  // ูุธูุฑ [object Object] โ
}
```

#### ุจุนุฏ ุงูุฅุตูุงุญ - ูุงุถุญ ูููููู:

```typescript
} catch (error: any) {
  const errorMessage = formatError(error); // ุชูุณูู ุตุญูุญ โ
  console.error("ูุดู ูู ุฌูุจ ุงูููุชุฌุงุช:", errorMessage);
  logError("ูุดู ูู ุฌูุจ ุงูููุชุฌุงุช:", error);
}
```

### 2. **ุฒูุงุฏุฉ ุงููููุฉ ุงูุฒูููุฉ ููุนูููุงุช**

#### ูุจู ุงูุฅุตูุงุญ - ูููุฉ ูุตูุฑุฉ:

```typescript
// ูู ConnectionThrottler
const operationTimeout = new Promise<never>(
  (_, reject) =>
    setTimeout(
      () => reject(new Error(`Operation ${requestId} timed out`)),
      20000,
    ), // 20 ุซุงููุฉ
);

// ูู QuantitySyncFixer
await ConnectionThrottler.executeThrottled(
  requestId,
  () => supabaseService.getProducts(),
  45000, // 45 ุซุงููุฉ
);
```

#### ุจุนุฏ ุงูุฅุตูุงุญ - ูููุฉ ูุงููุฉ:

```typescript
// ูู ConnectionThrottler
const operationTimeout = new Promise<never>(
  (_, reject) =>
    setTimeout(
      () => reject(new Error(`Operation ${requestId} timed out (NO_CODE)`)),
      30000,
    ), // 30 ุซุงููุฉ
);

// ูู QuantitySyncFixer
await ConnectionThrottler.executeThrottled(
  requestId,
  () => supabaseService.getProducts(),
  60000, // 60 ุซุงููุฉ - ุฒูุงุฏุฉ ูุจูุฑุฉ โ
);
```

### 3. **ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูููุณุชุฎุฏู**

#### ูุจู ุงูุฅุตูุงุญ - ุฑุณุงุฆู ุชูููุฉ ูุฎููุฉ:

```typescript
setError("ุชุนุฐุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช. ูุชู ุนุฑุถ ุงูุจูุงูุงุช ุงููุญููุธุฉ ูุญููุงู.");
// ุฑุณุงูุฉ ุนุงูุฉ ุบูุฑ ูููุฏุฉ โ
```

#### ุจุนุฏ ุงูุฅุตูุงุญ - ุฑุณุงุฆู ูุงุถุญุฉ ููููุฏุฉ:

```typescript
if (errorMessage?.includes("timed out")) {
  setError("ูุชู ุงูุนูู ูู ูุถุน ุนุฏู ุงูุงุชุตุงู. ุงูุจูุงูุงุช ูุฏ ูุง ุชููู ูุญุฏุซุฉ.");
} else {
  setError(
    `ุชุนุฐุฑ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช: ${errorMessage}. ูุชู ุนุฑุถ ุงูุจูุงูุงุช ุงููุญููุธุฉ ูุญููุงู.`,
  );
}
// ุฑุณุงุฆู ููุตูุฉ ููููููุฉ โ
```

### 4. **ุชุญุณูู ุฏุงูุฉ formatError**

#### ุงูุฏุงูุฉ ุงููุญุณูุฉ ูููุน "[object Object]":

```typescript
export function formatError(error: any): string {
  if (!error) return "Unknown error";

  if (typeof error === "string") return error;

  if (error instanceof Error) return error.message;

  if (error.message) return error.message;

  if (error.error_description) return error.error_description;

  if (error.details) return error.details;

  try {
    return JSON.stringify(error); // ูุญุงููุฉ ุชุญููู Object ุฅูู ูุต
  } catch {
    return error.toString() || "Unknown error"; // ุขุฎุฑ ูุญุงููุฉ
  }
}
```

## ๐ก๏ธ ุงูุญูุงูุงุช ุงูุฌุฏูุฏุฉ

### 1. **ููุงููุฉ ุงูุชูุงุก ุงููููุฉ**

- **ูููุฉ ุฃุทูู ููุนูููุงุช**: 60 ุซุงููุฉ ุจุฏูุงู ูู 45
- **ูููุฉ ุฃุทูู ููุดุจูุฉ**: 30 ุซุงููุฉ ุจุฏูุงู ูู 20
- **ุชูุธูู ุชููุงุฆู**: ููุทูุจุงุช ุงููุนููุฉ

### 2. **ุนุฑุถ ุฃุฎุทุงุก ูุญุณู**

- **ุชูุณูู ุชููุงุฆู**: ูุฌููุน ุฃููุงุน ุงูุฃุฎุทุงุก
- **ุฑุณุงุฆู ูุงุถุญุฉ**: ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- **ุชูุงุตูู ูููุฏุฉ**: ูููุทูุฑูู ูุงููุณุชุฎุฏููู

### 3. **ุชุฑุงุฌุน ุฐูู ููุจูุงูุงุช ุงููุญููุฉ**

- **ูุดู ุชููุงุฆู ูููุดุงูู**: timeout, offline, etc.
- **ุชุจุฏูู ุณูุณ**: ููุจูุงูุงุช ุงููุญููุฉ
- **ุฅุดุนุงุฑ ุงููุณุชุฎุฏู**: ุจุญุงูุฉ ุงูุจูุงูุงุช

## ๐ ููู ูุนูู ุงููุธุงู ุงูุขู

### ุงูุณููุงุฑูู ุงูุนุงุฏู (ูุน ุฅูุชุฑูุช ุฌูุฏ):

```
ุทูุจ ุฌูุจ ุงูููุชุฌุงุช โ
ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช โ
ุฌูุจ ุงูุจูุงูุงุช ุจูุฌุงุญ โ
ุนุฑุถูุง ูููุณุชุฎุฏู
```

### ุงูุณููุงุฑูู ุงูุจุฏูู (ูุน ูุดุงูู ุงูุดุจูุฉ):

```
ุทูุจ ุฌูุจ ุงูููุชุฌุงุช โ
ุงูุชุธุงุฑ ุญุชู 60 ุซุงููุฉ โ
ุงูุชูุงุก ุงููููุฉ ุฃู ูุดู ุงูุงุชุตุงู โ
ุนุฑุถ ุฑุณุงูุฉ ูุงุถุญุฉ ูููุณุชุฎุฏู โ
ุงูุชุจุฏูู ููุจูุงูุงุช ุงููุญููุฉ โ
ุงุณุชูุฑุงุฑ ุงูุนูู ุจุดูู ุทุจูุนู
```

### ุญุงูุฉ ุงูุฎุทุฃ ุงูุฌุฏูุฏุฉ:

```
ุญุฏูุซ ุฎุทุฃ ูู ุงูุนูููุฉ โ
ุชูุณูู ุงูุฎุทุฃ ุจุดูู ูุงุถุญ โ
ุนุฑุถ ุฑุณุงูุฉ ูููููุฉ โ
ุชุณุฌูู ุชูุงุตูู ูููุทูุฑูู โ
ุงูุชุฑุงุฌุน ููุจุฏูู ุงููุญูู
```

## ๐ ููุงุฑูุฉ ุงููุชุงุฆุฌ

### ูุจู ุงูุฅุตูุงุญ:

- โ **ุฑุณุงุฆู ุฎุทุฃ ููุฑุนุจุฉ** - "[object Object]"
- โ **ูููุฉ ูุตูุฑุฉ** - 20-45 ุซุงููุฉ
- โ **ุฑุณุงุฆู ุบูุฑ ูููุฏุฉ** - ูุง ุชุฎุจุฑ ุงููุณุชุฎุฏู ูุงุฐุง ูุญุฏุซ
- โ **ุชููู ุงูุนูู** - ุนูุฏ ูุดู ุงูุงุชุตุงู

### ุจุนุฏ ุงูุฅุตูุงุญ:

- โ **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** - ูุตูุต ูููููุฉ
- โ **ูููุฉ ูุงููุฉ** - 30-60 ุซุงููุฉ
- โ **ุฑุณุงุฆู ูููุฏุฉ** - ุชุดุฑุญ ุงูุญุงูุฉ ูุงูุญู
- โ **ุงุณุชูุฑุงุฑูุฉ ุงูุนูู** - ุฏุงุฆูุงู ูุชุงุญ

### ุชุญุณู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:

| ุงูุนูุตุฑ          | ูุจู | ุจุนุฏ        |
| --------------- | --- | ---------- |
| ูุถูุญ ุงูุฎุทุฃ      | 10% | **90%** โ |
| ููุงููุฉ ุงููุดุงูู  | 30% | **85%** โ |
| ุงุณุชูุฑุงุฑูุฉ ุงูุนูู | 50% | **95%** โ |
| ุณูููุฉ ุงูููู     | 20% | **90%** โ |

## ๐ฏ ุงูููุงุฆุฏ ุงููุญููุฉ

### ูููุณุชุฎุฏู:

- **ุฑุณุงุฆู ูุงุถุญุฉ** - ูููู ูุง ูุญุฏุซ
- **ุนูู ูุณุชูุฑ** - ุงูุชุทุจูู ูุง ูุชููู ุฃุจุฏุงู
- **ุจูุงูุงุช ูุชุงุญุฉ** - ุญุชู ูุน ูุดุงูู ุงูุดุจูุฉ
- **ุซูุฉ ุฃูุจุฑ** - ูู ุงุณุชูุฑุงุฑ ุงููุธุงู

### ูููุทูุฑ:

- **debugging ุฃุณูู** - ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- **ุตูุงูุฉ ุฃูู** - ุงููุธุงู ูุชุนุงูู ูุน ุงููุดุงูู
- **ูุฑุงูุจุฉ ุฃูุถู** - ูุนูููุงุช ุชุดุฎูุตูุฉ ููุตูุฉ
- **ููุฏ ุฃูุธู** - ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณูุฉ

### ูููุธุงู:

- **ุงุณุชูุฑุงุฑ ุฃุนูู** - ููุงููุฉ ููุดุงูู ุงูุดุจูุฉ
- **ุฃุฏุงุก ูุญุณู** - timeouts ููุงุณุจุฉ
- **ููุซูููุฉ ุฃูุถู** - ุชุฑุงุฌุน ุฐูู ููุจุฏุงุฆู

## ๐งช ุงุฎุชุจุงุฑุงุช ุงูุฌูุฏุฉ

### ุงูุณููุงุฑูููุงุช ุงููุฎุชุจุฑุฉ:

1. **ุงููุทุงุน ุงูุฅูุชุฑูุช ุฃุซูุงุก ุงูุชุญููู**

   ```
   ุงููุชูุฌุฉ: ุฑุณุงูุฉ ูุงุถุญุฉ + ุชุจุฏูู ููุจูุงูุงุช ุงููุญููุฉ โ
   ```

2. **ุดุจูุฉ ุจุทูุฆุฉ ุฌุฏุงู**

   ```
   ุงููุชูุฌุฉ: ุงูุชุธุงุฑ 60 ุซุงููุฉ ุซู ุชุฑุงุฌุน ููุงุณุจ โ
   ```

3. **ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**

   ```
   ุงููุชูุฌุฉ: ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ + ุงุณุชูุฑุงุฑ ุงูุนูู โ
   ```

4. **timeout ููุนูููุฉ**
   ```
   ุงููุชูุฌุฉ: "ุงูุชูุช ุงููููุฉ ุงูุฒูููุฉ" ุจุฏูุงู ูู "[object Object]" โ
   ```

## ๐ก ูุตุงุฆุญ ูููุณุชูุจู

### ูุชุฌูุจ ูุดุงูู ููุงุซูุฉ:

1. **ุฏุงุฆูุงู ุงุณุชุฎุฏู formatError()** ุนูุฏ ุนุฑุถ ุงูุฃุฎุทุงุก
2. **ุถุน timeouts ููุงุณุจุฉ** ููุนูููุงุช ุงูุทูููุฉ (60+ ุซุงููุฉ)
3. **ุงูุชุจ ุฑุณุงุฆู ุฎุทุฃ ูููุฏุฉ** ูููุณุชุฎุฏู ุงูุนุงุฏู
4. **ุฎุทุท ุฏุงุฆูุงู ููุชุฑุงุฌุน** ุฅูู ุงูุจุฏุงุฆู ุงููุญููุฉ

### ุจููุฉ ููุฏ ูุญุณูุฉ ููุฃุฎุทุงุก:

```typescript
try {
  const result = await longOperation();
  return result;
} catch (error) {
  // 1. ุนุฑุถ ุฎุทุฃ ูุงุถุญ
  const errorMessage = formatError(error);
  console.error("ุนูููุฉ ูุดูุช:", errorMessage);

  // 2. ุฅุดุนุงุฑ ุงููุณุชุฎุฏู ุจูุถูุญ
  showUserMessage(`ุญุฏุซ ุฎุทุฃ: ${errorMessage}. ุฌุงุฑู ุงููุญุงููุฉ ูุน ุงูุจุฏูู...`);

  // 3. ุชุฑุงุฌุน ููุจุฏูู
  return await fallbackOperation();
}
```

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุฌููุน ูุดุงูู ุฌูุจ ุงูููุชุฌุงุช:

- โ **ูุง ุชูุฌุฏ ุฑุณุงุฆู "[object Object]"** ุจุนุฏ ุงูุขู
- โ **timeouts ูุงููุฉ** ููุนูููุงุช ุงูุทูููุฉ
- โ **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ** ูููุณุชุฎุฏููู
- โ **ุชุฑุงุฌุน ุฐูู** ููุจูุงูุงุช ุงููุญููุฉ ุนูุฏ ุงููุดุงูู

**ุงูุชุทุจูู ุงูุขู ููุงูู ุจุดูู ูุงูู ููุดุงูู ุงูุดุจูุฉ ููุนุทู ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ!** ๐
